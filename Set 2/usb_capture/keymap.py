keycode_map = {
    'a': (0x04, 0), 'b': (0x05, 0), 'c': (0x06, 0), 'd': (0x07, 0),
    'e': (0x08, 0), 'f': (0x09, 0), 'g': (0x0A, 0), 'h': (0x0B, 0),
    'i': (0x0C, 0), 'j': (0x0D, 0), 'k': (0x0E, 0), 'l': (0x0F, 0),
    'm': (0x10, 0), 'n': (0x11, 0), 'o': (0x12, 0), 'p': (0x13, 0),
    'q': (0x14, 0), 'r': (0x15, 0), 's': (0x16, 0), 't': (0x17, 0),
    'u': (0x18, 0), 'v': (0x19, 0), 'w': (0x1A, 0), 'x': (0x1B, 0),
    'y': (0x1C, 0), 'z': (0x1D, 0), 'A': (0x04, 2), 'B': (0x05, 2), 
    'C': (0x06, 2), 'D': (0x07, 2), 'E': (0x08, 2), 'F': (0x09, 2), 
    'G': (0x0A, 2), 'H': (0x0B, 2), 'I': (0x0C, 2), 'J': (0x0D, 2), 
    'K': (0x0E, 2), 'L': (0x0F, 2), 'M': (0x10, 2), 'N': (0x11, 2), 
    'O': (0x12, 2), 'P': (0x13, 2), 'Q': (0x14, 2), 'R': (0x15, 2), 
    'S': (0x16, 2), 'T': (0x17, 2), 'U': (0x18, 2), 'V': (0x19, 2), 
    'W': (0x1A, 2), 'X': (0x1B, 2), 'Y': (0x1C, 2), 'Z': (0x1D, 2), 
    '1': (0x1E, 0), '2': (0x1F, 0), '3': (0x20, 0), '4': (0x21, 0), 
    '5': (0x22, 0), '6': (0x23, 0), '7': (0x24, 0), '8': (0x25, 0), 
    '9': (0x26, 0), '0': (0x27, 0), '!': (0x1E, 2), '@': (0x1F, 2), 
    '#': (0x20, 2), '$': (0x21, 2), '%': (0x22, 2), '^': (0x23, 2), 
    '&': (0x24, 2), '*': (0x25, 2), '(': (0x26, 2), ')': (0x27, 2), 
    '\n': (0x28, 0), ' ': (0x2C, 0), '-': (0x2D, 0), '_': (0x2D, 2), 
    '=': (0x2E, 0), '+': (0x2E, 2), '[': (0x2F, 0), '{': (0x2F, 2), 
    ']': (0x30, 0), '}': (0x30, 2), '\\': (0x31, 0), '|': (0x31, 2), 
    ';': (0x33, 0), ':': (0x33, 2), '\'': (0x34, 0), '"': (0x34, 2), 
    ',': (0x36, 0), '<': (0x36, 2), '.': (0x37, 0), '>': (0x37, 2), 
    '/': (0x38, 0), '?': (0x38, 2), None: (0, 0)
}

keycode_map_recersed = dict()

for (key, (val, shift)) in keycode_map.items():
    if not keycode_map_recersed.get(val):
        keycode_map_recersed[val] = [None, None]
    index = 0 if not shift else 1
    keycode_map_recersed[val][index] = key
